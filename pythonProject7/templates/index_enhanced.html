<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Color Detector Pro - Advanced Color Analysis with AI, Palettes, Gradients, and Accessibility">
    <title>Color Detector Pro | Advanced Color Analysis</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-palette"></i>
                <span>Color Detector Pro</span>
            </div>
            <div class="header-controls">
                <button id="themeToggle" class="btn-icon" title="Toggle Dark Mode" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="tab-navigation">
        <button class="tab-btn active" data-tab="detect" aria-label="Detect colors">
            <i class="fas fa-camera"></i>
            Detect
        </button>
        <button class="tab-btn" data-tab="extract" aria-label="Extract color palette">
            <i class="fas fa-image"></i>
            Extract Palette
        </button>
        <button class="tab-btn" data-tab="gradient" aria-label="Generate gradients">
            <i class="fas fa-fill"></i>
            Gradients
        </button>
        <button class="tab-btn" data-tab="mixer" aria-label="Mix colors">
            <i class="fas fa-fill-drip"></i>
            Color Mixer
        </button>
        <button class="tab-btn" data-tab="accessibility" aria-label="Accessibility tools">
            <i class="fas fa-universal-access"></i>
            Accessibility
        </button>
        <button class="tab-btn" data-tab="ai" aria-label="AI suggestions">
            <i class="fas fa-magic"></i>
            AI Suggestions
        </button>
        <button class="tab-btn" data-tab="tools" aria-label="Color tools">
            <i class="fas fa-tools"></i>
            Tools
        </button>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Detect Tab -->
        <div id="detect-tab" class="tab-content active">
            <!-- Camera Section -->
            <section class="camera-section">
                <div class="video-container">
                    <video id="video" autoplay muted playsinline webkit-playsinline 
                           x5-playsinline x5-video-player-type="h5" 
                           aria-label="Camera feed for color detection">
                        Your browser does not support the video element. Please use a modern browser to access camera functionality.
                    </video>
                    <div class="center-box"></div>
                </div>
                <div class="camera-controls">
                    <button id="capture" class="btn btn-primary" aria-label="Detect color from camera">
                        <i class="fas fa-camera"></i>
                        Detect Color
                    </button>
                    <button id="switchCam" class="btn btn-secondary" aria-label="Switch camera">
                        <i class="fas fa-sync-alt"></i>
                        Switch Camera
                    </button>
                </div>
            </section>

            <!-- Color Search -->
            <section class="search-section">
                <div class="search-container">
                    <input type="text" id="colorSearch" placeholder="Search colors by name (e.g., 'blue', 'red', 'forest')" aria-label="Search colors by name" title="Search for colors by name">
                    <button id="searchBtn" class="btn btn-primary" aria-label="Search colors">
                        <i class="fas fa-search"></i>
                        Search
                    </button>
                </div>
                <div id="searchResults" class="search-results hidden" aria-live="polite"></div>
            </section>

            <!-- Result Section -->
            <div id="result" class="hidden">
                <!-- Main Color Info -->
                <div class="result-card">
                    <h2>Detected Color</h2>
                    <div class="main-color-display">
                        <div id="mainColor"></div>
                        <h3 id="colorName">-</h3>
                        <p id="hexValue" class="hex-display">-</p>
                    </div>
                    
                    <div class="color-formats mt-3">
                        <div class="format-item">
                            <strong>RGB:</strong>
                            <span id="rgbValue">-</span>
                        </div>
                        <div class="format-item">
                            <strong>HSL:</strong>
                            <span id="hslValue">-</span>
                        </div>
                        <div class="format-item">
                            <strong>HSV:</strong>
                            <span id="hsvValue">-</span>
                        </div>
                        <div class="format-item">
                            <strong>CMYK:</strong>
                            <span id="cmykValue">-</span>
                        </div>
                    </div>

                    <div class="mt-3">
                        <h4>Temperature</h4>
                        <div class="format-item">
                            <strong id="temperatureValue">-</strong>
                            <span id="temperatureDesc">-</span>
                        </div>
                    </div>

                    <div class="export-buttons mt-3">
                        <button id="copyHex" class="btn btn-primary" aria-label="Copy hex color code">
                            <i class="fas fa-copy"></i>
                            Copy Hex
                        </button>
                        <button id="addToFavorites" class="btn btn-secondary" aria-label="Add color to favorites">
                            <i class="fas fa-heart"></i>
                            Add to Favorites
                        </button>
                        <button id="exportJSON" class="btn btn-secondary" aria-label="Export color data as JSON">
                            <i class="fas fa-download"></i>
                            Export JSON
                        </button>
                        <button id="exportCSS" class="btn btn-secondary" aria-label="Export color as CSS">
                            <i class="fas fa-file-code"></i>
                            Export CSS
                        </button>
                    </div>
                </div>

                <!-- Color Schemes -->
                <div class="schemes-section">
                    <h2>Color Schemes</h2>
                    <div class="scheme-grid">
                        <div class="scheme-card">
                            <h3>Monochromatic</h3>
                            <div id="monochromatic" class="color-scheme"></div>
                        </div>
                        <div class="scheme-card">
                            <h3>Complementary</h3>
                            <div id="complementary" class="color-scheme"></div>
                        </div>
                        <div class="scheme-card">
                            <h3>Analogous</h3>
                            <div id="analogous" class="color-scheme"></div>
                        </div>
                        <div class="scheme-card">
                            <h3>Triadic</h3>
                            <div id="triadic" class="color-scheme"></div>
                        </div>
                        <div class="scheme-card">
                            <h3>Tetradic</h3>
                            <div id="tetradic" class="color-scheme"></div>
                        </div>
                        <div class="scheme-card">
                            <h3>Split Complementary</h3>
                            <div id="split_complementary" class="color-scheme"></div>
                        </div>
                    </div>
                </div>

                <!-- Shades & Tints -->
                <div class="shades-section">
                    <h2>Shades & Tints</h2>
                    <div class="shades-container">
                        <div class="shades-card">
                            <h3>Shades</h3>
                            <div id="shades" class="color-scheme"></div>
                        </div>
                        <div class="shades-card">
                            <h3>Tints</h3>
                            <div id="tints" class="color-scheme"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Extract Palette Tab -->
        <div id="extract-tab" class="tab-content">
            <div class="extract-section">
                <h2>Extract Color Palette from Image</h2>
                <div class="upload-container">
                    <input type="file" id="imageUpload" accept="image/*" class="hidden" aria-label="Upload image for palette extraction">
                    <label for="imageUpload" class="upload-label">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Upload Image</span>
                    </label>
                </div>
                
                <div class="extract-controls">
                    <div class="control-group">
                        <label for="nColors">Number of Colors:</label>
                        <input type="number" id="nColors" min="2" max="10" value="5" aria-label="Number of colors to extract" title="Select number of colors to extract from image">
                    </div>
                    <div class="control-group">
                        <label for="extractionMethod">Extraction Method:</label>
                        <select id="extractionMethod" aria-label="Color extraction method" title="Choose the algorithm for color extraction">
                            <option value="kmeans">K-Means Clustering</option>
                            <option value="median_cut">Median Cut</option>
                        </select>
                    </div>
                    <button id="extractPalette" class="btn btn-primary" aria-label="Extract color palette from image">
                        <i class="fas fa-palette"></i>
                        Extract Palette
                    </button>
                </div>

                <div id="extractedPalette" class="hidden">
                    <h3>Extracted Palette</h3>
                    <div id="paletteColors" class="palette-colors"></div>
                    <div class="palette-actions">
                        <button id="savePalette" class="btn btn-primary" aria-label="Save extracted palette">
                            <i class="fas fa-save"></i>
                            Save Palette
                        </button>
                        <button id="exportPaletteCSS" class="btn btn-secondary" aria-label="Export palette as CSS">
                            <i class="fas fa-file-code"></i>
                            Export CSS
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gradient Tab -->
        <div id="gradient-tab" class="tab-content">
            <div class="gradient-section">
                <h2>Gradient Generator</h2>
                
                <!-- Preset Gradients -->
                <div class="presets-section">
                    <h3>Preset Gradients</h3>
                    <div id="presetGradients" class="preset-grid"></div>
                </div>

                <!-- Custom Gradient -->
                <div class="custom-gradient">
                    <h3>Create Custom Gradient</h3>
                    <div class="gradient-controls">
                        <div class="color-inputs">
                            <div class="color-input-group">
                                <label for="gradientStart">Start Color:</label>
                                <input type="color" id="gradientStart" value="#667EEA" aria-label="Gradient start color" title="Choose the start color for gradient">
                                <input type="text" id="gradientStartHex" value="#667EEA" placeholder="#667EEA" aria-label="Gradient start color hex code" title="Enter hex code for start color">
                            </div>
                            <div class="color-input-group">
                                <label for="gradientEnd">End Color:</label>
                                <input type="color" id="gradientEnd" value="#764BA2" aria-label="Gradient end color" title="Choose the end color for gradient">
                                <input type="text" id="gradientEndHex" value="#764BA2" placeholder="#764BA2" aria-label="Gradient end color hex code" title="Enter hex code for end color">
                            </div>
                        </div>
                        
                        <div class="gradient-options">
                            <div class="control-group">
                                <label for="gradientType">Gradient Type:</label>
                                <select id="gradientType" aria-label="Gradient type" title="Choose the type of gradient">
                                    <option value="linear">Linear</option>
                                    <option value="radial">Radial</option>
                                    <option value="conic">Conic</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="gradientAngle">Angle (degrees):</label>
                                <input type="range" id="gradientAngle" min="0" max="360" value="90" aria-label="Gradient angle" title="Set the angle for linear gradient">
                                <span id="angleValue">90Â°</span>
                            </div>
                            <div class="control-group">
                                <label for="gradientSteps">Steps:</label>
                                <input type="number" id="gradientSteps" min="2" max="20" value="10" aria-label="Gradient steps" title="Number of color steps in gradient">
                            </div>
                        </div>
                        
                        <button id="generateGradient" class="btn btn-primary" aria-label="Generate custom gradient">
                            <i class="fas fa-fill"></i>
                            Generate Gradient
                        </button>
                    </div>
                    
                    <div id="gradientPreview" class="gradient-preview hidden">
                        <div id="gradientDisplay"></div>
                        <div class="gradient-code">
                            <h4>CSS Code:</h4>
                            <code id="gradientCSS"></code>
                            <button id="copyGradientCSS" class="btn btn-small" aria-label="Copy gradient CSS code">
                                <i class="fas fa-copy"></i>
                                Copy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Color Mixer Tab -->
        <div id="mixer-tab" class="tab-content">
            <div class="mixer-section">
                <h2>Color Mixer</h2>
                
                <div class="mixer-controls">
                    <div class="color-mixer-inputs">
                        <div class="mixer-color-group">
                            <label for="mixColor1">Color 1:</label>
                            <input type="color" id="mixColor1" value="#FF6B6B" aria-label="First color to mix" title="Choose the first color for mixing">
                            <input type="text" id="mixColor1Hex" value="#FF6B6B" placeholder="#FF6B6B" aria-label="First color hex code" title="Enter hex code for first color">
                        </div>
                        <div class="mixer-color-group">
                            <label for="mixColor2">Color 2:</label>
                            <input type="color" id="mixColor2" value="#4ECDC4" aria-label="Second color to mix" title="Choose the second color for mixing">
                            <input type="text" id="mixColor2Hex" value="#4ECDC4" placeholder="#4ECDC4" aria-label="Second color hex code" title="Enter hex code for second color">
                        </div>
                    </div>
                    
                    <div class="mixer-options">
                        <div class="control-group">
                            <label for="mixRatio">Mix Ratio:</label>
                            <input type="range" id="mixRatio" min="0" max="100" value="50" aria-label="Color mixing ratio" title="Adjust the ratio between the two colors">
                            <span id="ratioValue">50%</span>
                        </div>
                        <div class="control-group">
                            <label for="mixMethod">Mixing Method:</label>
                            <select id="mixMethod" aria-label="Color mixing method" title="Choose the color mixing algorithm">
                                <option value="subtractive">Subtractive (Paint-like)</option>
                                <option value="cmyk">CMYK</option>
                                <option value="rgb">RGB (Light)</option>
                                <option value="hsl">HSL</option>
                            </select>
                        </div>
                    </div>
                    
                    <button id="mixColors" class="btn btn-primary" aria-label="Mix colors together">
                        <i class="fas fa-fill-drip"></i>
                        Mix Colors
                    </button>
                </div>
                
                <div id="mixResult" class="hidden">
                    <h3>Mixed Color</h3>
                    <div class="mixed-color-display">
                        <div id="mixedColor"></div>
                        <div class="mixed-color-info">
                            <p><strong>Hex:</strong> <span id="mixedHex"></span></p>
                            <p><strong>RGB:</strong> <span id="mixedRGB"></span></p>
                            <p><strong>Method:</strong> <span id="mixedMethod"></span></p>
                        </div>
                    </div>
                    <div class="mix-actions">
                        <button id="useMixedColor" class="btn btn-primary" aria-label="Use mixed color">
                            <i class="fas fa-check"></i>
                            Use This Color
                        </button>
                        <button id="saveMixedColor" class="btn btn-secondary" aria-label="Save mixed color to favorites">
                            <i class="fas fa-save"></i>
                            Save to Favorites
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <section class="history-section">
            <div class="section-header">
                <h2>Color History</h2>
                <button id="clearHistory" class="btn btn-small btn-danger" aria-label="Clear color history">
                    <i class="fas fa-trash"></i>
                    Clear All
                </button>
            </div>
            <div id="history" class="history-grid">
                <p class="no-history">No colors detected yet</p>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2024 Color Detector Pro - Advanced Color Analysis Tool</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
